#summary Application settings

[http://code.google.com/p/karrigell/wiki/Home Home] / [http://code.google.com/p/karrigell/wiki/RefeRence Reference]

= Introduction =

The server can run one or several applications. By default, starting the server with

{{{
Karrigell.run()
}}}

means that there is only one application, serving scripts and documents from the directory where the server script stands

This page explains how you can change these default settings

= Application settings =

An application is described by an instance of a subclass of the class <font color="#363" size="2"><b>`Karrigell.App`</b></font>. Each subclass defines the following attributes :

===root_url===
A string beginning with a forward slash (/), indicates the first part of the urls served by this application. Defaults to "/"

===root_dir===
The directory in the file system to serve scripts and documents from. Defaults to the directory where the server script stands

===session_storage_class===
The class used to manage the storage and retrieval of session objects (see SessionManagement). Defaults to the class <font color="#363" size="2"><b>`FileSessionManagement`</b></font> in module Karrigell.sessions

===users_db===
An object representing the users database. It must have the same interface as the class <font color="#363" size="2"><b>`SQLiteUsersDb`</b></font> in module Karrigell.admin_db

You can use a SQLite users database by specifying its path in the file system :

{{{
users_db = Karrigell.admin_db.SQLiteUsersDb(db_path)
}}}

Defaults to None, meaning that there is no users management for this application

===translations_db===
An object representing the translations database, used to localize the application. It must have the same interface as the class <font color="#363" size="2"><b>`SQLiteTranslationDb`</b></font> in module Karrigell.admin_db

You can use a SQLite translation database by specifying its path in the file system :

{{{
users_db = Karrigell.admin_db.SQLiteTranslationDb(db_path)
}}}

Defaults to None, meaning that there is no translation management for this application

===login_url===
If a users database has been defined, indicates the url where a script must be redirected if it requires user login. Defaults to root_url/admin/login.py/login (the script login.py is provided in the directory admin_tools of the distribution)

= Serving an application =

Edit the script server.py :

{{{
import Karrigell
import Karrigell.admin_db

class Default(Karrigell.App):
    pass

class Pictures(Karrigell.App):
    root_url = "/pics"
    root_dir = "/path/to/pictures"
    users_db = Karrigell.admin_db.SQLiteUsersDb('/path/to/users_db')

Karrigell.run(apps=[Default(),Pictures()])
}}}

The function run takes a keyword argument apps, set to a list of instances of application classes

In this example, the server runs 2 application : the default application, and an application serving requests for urls starting with /pics/, taking the files and scripts from the specified root_dir. This application manages users login in an SQLite database at the specified location in the file system

For obvious security reasons, the users database should be located outside of the root directory